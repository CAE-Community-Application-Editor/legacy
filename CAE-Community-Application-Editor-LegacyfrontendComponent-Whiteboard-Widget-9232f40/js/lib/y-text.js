!function e(t,n,r){function i(l,u){if(!n[l]){if(!t[l]){var s="function"==typeof require&&require;if(!u&&s)return s(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+l+"'")}var f=n[l]={exports:{}};t[l][0].call(f.exports,function(e){var n=t[l][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t){var n;if(n=function(){function e(e){if(this.textfields=[],null==e)this._text="";else{if(e.constructor!==String)throw new Error("Y.Text expects a String as a constructor");this._text=e}}return e.prototype._name="Text",e.prototype._getModel=function(e,t){return null==this._model&&(this._model=new t.ListManager(this).execute(),this.insert(0,this._text)),delete this._text,this._model},e.prototype._setModel=function(e){return this._model=e,delete this._text},e.prototype.val=function(){return this._model.fold("",function(e,t){return e+t.val()})},e.prototype.observe=function(){return this._model.observe.apply(this._model,arguments)},e.prototype.unobserve=function(){return this._model.unobserve.apply(this._model,arguments)},e.prototype.toString=function(){return this.val()},e.prototype.insert=function(e,t){var n;if(t.constructor!==String)throw new Error("Y.String.insert expects a String as the second parameter!");if("number"!=typeof e)throw new Error("Y.String.insert expects a Number as the first parameter!");return t.length>0?(n=this._model.getOperationByPosition(e),this._model.insertAfter(n,t)):void 0},e.prototype["delete"]=function(e,t){return this._model["delete"](e,t)},e.prototype.bind=function(e,t){var n,r,i,o,l,u,s,f,h;for(null==t&&(t=window),null==t.getSelection&&(t=window),h=this.textfields,s=0,f=h.length;f>s;s++)if(i=h[s],i===e)return;return r=!1,o=this,e.value=this.val(),this.textfields.push(e),null!=e.selectionStart&&null!=e.setSelectionRange?(n=function(t){var n,r;return n=e.selectionStart,r=e.selectionEnd,null!=t&&(n=t(n),r=t(r)),{left:n,right:r}},u=function(t){return l(o.val()),e.setSelectionRange(t.left,t.right)},l=function(t){return e.value=t}):(n=function(n){var r,i,o,l;return o={},l=t.getSelection(),r=e.textContent.length,o.left=Math.min(l.anchorOffset,r),o.right=Math.min(l.focusOffset,r),null!=n&&(o.left=n(o.left),o.right=n(o.right)),i=l.focusNode,o.isReal=i===e||i===e.childNodes[0]?!0:!1,o},u=function(t){var n,r,i;return l(o.val()),i=e.childNodes[0],t.isReal&&null!=i?(t.left<0&&(t.left=0),t.right=Math.max(t.left,t.right),t.right>i.length&&(t.right=i.length),t.left=Math.min(t.left,t.right),n=document.createRange(),n.setStart(i,t.left),n.setEnd(i,t.right),r=window.getSelection(),r.removeAllRanges(),r.addRange(n)):void 0},l=function(t){var n,r,i,o,l,u;for(r=t.replace(new RegExp("\n","g")," ").split(" "),e.innerText="",u=[],i=o=0,l=r.length;l>o;i=++o)n=r[i],e.innerText+=n,i!==r.length-1?u.push(e.innerHTML+="&nbsp;"):u.push(void 0);return u}),l(this.val()),this.observe(function(e){var t,i,o,l,s,f,h;for(h=[],s=0,f=e.length;f>s;s++)t=e[s],r?h.push(void 0):"insert"===t.type?(o=t.position,i=function(e){return o>=e?e:e+=1},l=n(i),h.push(u(l))):"delete"===t.type?(o=t.position,i=function(e){return o>e?e:e-=1},l=n(i),h.push(u(l))):h.push(void 0);return h}),e.onkeypress=function(t){var i,l,s,f;return o.is_deleted?(e.onkeypress=null,!0):(r=!0,i=null,i=13===t.keyCode?"\n":null!=t.key?32===t.charCode?" ":t.key:window.String.fromCharCode(t.keyCode),i.length>1?!0:(i.length>0&&(f=n(),s=Math.min(f.left,f.right),l=Math.abs(f.right-f.left),o["delete"](s,l),o.insert(s,i),f.left=s+i.length,f.right=f.left,u(f)),t.preventDefault(),r=!1,!1))},e.onpaste=function(t){return o.is_deleted?(e.onpaste=null,!0):t.preventDefault()},e.oncut=function(t){return o.is_deleted?(e.oncut=null,!0):t.preventDefault()},e.onkeydown=function(t){var i,l,s,f,h,a;if(r=!0,o.is_deleted)return e.onkeydown=null,!0;if(h=n(),f=Math.min(h.left,h.right,o.val().length),l=Math.abs(h.left-h.right),null!=t.keyCode&&8===t.keyCode){if(l>0)o["delete"](f,l),h.left=f,h.right=f,u(h);else if(null!=t.ctrlKey&&t.ctrlKey){for(a=o.val(),s=f,i=0,f>0&&(s--,i++);s>0&&" "!==a[s]&&"\n"!==a[s];)s--,i++;o["delete"](s,f-s),h.left=s,h.right=s,u(h)}else f>0&&(o["delete"](f-1,1),h.left=f-1,h.right=f-1,u(h));return t.preventDefault(),r=!1,!1}return null!=t.keyCode&&46===t.keyCode?(l>0?(o["delete"](f,l),h.left=f,h.right=f,u(h)):(o["delete"](f,1),h.left=f,h.right=f,u(h)),t.preventDefault(),r=!1,!1):(r=!1,!0)}},e}(),"undefined"!=typeof window&&null!==window){if(null==window.Y)throw new Error("You must first import Y!");window.Y.Text=n}"undefined"!=typeof t&&null!==t&&(t.exports=n)},{}]},{},[1]);